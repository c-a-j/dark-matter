---
import { render } from "astro:content";
import PostLayout from "../../layouts/PostLayout.astro";
import { getCollectionStaticPaths } from "../../lib/utils";
import { getPaginationInfo } from "../../lib/utils";

export async function getStaticPaths() {
  return await getCollectionStaticPaths("posts");
}

const { entry: post } = Astro.props;
const { Content, headings } = await render(post);

const paginationInfo = await getPaginationInfo({ 
  url: Astro.url.pathname,
  collectionName: "posts",
  isSubcollection: post.data.isSubcollection,
});

---

<PostLayout 
  frontmatter={post.data} 
  headings={headings} 
  collectionName="posts"
  paginationInfo={paginationInfo}
>
  <Content />
</PostLayout>
